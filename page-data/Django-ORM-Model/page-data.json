{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Django-ORM-Model/",
    "result": {"data":{"cur":{"id":"06d74af0-5565-5dfa-84db-ce0b187213bf","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABBElEQVQoz2P4jwT+/fsHp//+/YvCh7EJAQZchsHAnz9//v/5+xcsBsJ//iL42CxjwOZCEHj++tX/T18+43UNNlejuBCmYM/JI/8zW2v+bz287/+1e7f/n7566f+561f+33n88P/h86f/n7x84f/9p4/xuxDmhbuPH/73L0j9n9hQ+j+9ueq/S3r0f9+ClP/RVQX/Y2uKwHIBhWn/yyd2wvVhNRAm+OPnz/97Th793zx78v+uBTP/bzuy///BMyfALizpa/uf19UIlj915SLEQGLD8N3HD/9//vqFEj4nLp2De5WoMITRoJhFjuW/SLEKAr+hYkTFMkwS2SswcXzJBauB1AAASn341nwsOmUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"썸네일\"\n        title=\"썸네일\"\n        src=\"/static/5f3366eed67a305e1a7a81e79a1f7483/8c557/django.png\"\n        srcset=\"/static/5f3366eed67a305e1a7a81e79a1f7483/e9ff0/django.png 180w,\n/static/5f3366eed67a305e1a7a81e79a1f7483/f21e7/django.png 360w,\n/static/5f3366eed67a305e1a7a81e79a1f7483/8c557/django.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"callout\"> 💡[Django] Django의 ORM</p>\n<h2 id=\"ormobject-relational-mapping\" style=\"position:relative;\"><a href=\"#ormobject-relational-mapping\" aria-label=\"ormobject relational mapping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ORM(Object Relational Mapping)</h2>\n<hr>\n<p>먼저 <code class=\"language-text\">ORM</code>이 뭘까요? 이름에서 알 수 있듯 간단히 말하면 <code class=\"language-text\">객체</code>와, <code class=\"language-text\">관계형 데이터베이스</code>를 <code class=\"language-text\">Mapping</code> 시켜주는 역할을 하는 녀석입니다.</p>\n<p><code class=\"language-text\">객체</code> &#x3C;- 매핑(ORM) -> <code class=\"language-text\">데이터베이스 데이터</code></p>\n<p>로직을 구성하면서 CRUD를 위해 SQL을 작성할 필요 없이, 객체를 정의하고 ORM이 제공하는 Method를 사용하여 데이터베이스에 적재된 데이터를 쉽게 접근할 수 있도록 하는 것입니다. 이 과정에서 자동으로 SQL을 생성하면서 매핑이 되는 것 입니다! (편하죠?)</p>\n<p>텍스트로만 보셨을 땐 이해가 잘 안되실 수도 있는데요, 코드를 보면 쉽게 이해하실 수 있으실 겁니다.</p>\n<p>만약 ORM이 없으면 DB에 접근하는 비즈니스 로직마다 SQL을 작성해서 접근해야 하고, 이렇게 되면 비즈니스 로직이 너무 복잡해지고 간결성이 줄어듭니다. 또 팀 내에서 코드를 서로 이해하는데에도 큰 리소스가 듭니다.</p>\n<p>저도 회사에서 Django 기반으로 서버가 구성되어 있어 ORM을 사용해 백엔드 로직을 작성하고 있는데, 너무 편합니다.</p>\n<p>하지만 이런 ORM도 만능은 아닙니다. 오히려 복잡한 비즈니스 로직을 작성할 땐 성능을 저하시킬 수도 있기 때문에 설계를 잘하는 것이 매우 중요합니다.</p>\n<p>일단 먼저 장단점부터 알아볼까요?\n<br></p>\n<h3 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<hr>\n<blockquote>\n<p><strong>편하고 직관적이어서 비즈니스 로직에 더욱 집중할 수 있다.</strong></p>\n</blockquote>\n<ul>\n<li>SQL문으로 데이터베이스에 접근하는 것이 아니라 클래스의 객체로 데이터를 조작하는 것이기 때문에 더 <code class=\"language-text\">객체지향적</code> 입니다.</li>\n<li>좀 더 직관적이고, 비즈니스 로직에 더 집중할 수 있도록 해줍니다. 이로인해 생산성이 증가합니다.</li>\n</ul>\n<blockquote>\n<p><strong>재사용이 편하고 유지보수가 용이하다.</strong></p>\n</blockquote>\n<ul>\n<li>각 객체를 한번 생성하면, 그 객체를 활용해 객체 안의 다양한 필드 값을 편하게 가져올 수 있어 재사용이 편리합니다.</li>\n<li>또한 자주 사용하는 Query Set을 모델내에 정의하면 재사용이 편리합니다.</li>\n</ul>\n<blockquote>\n<p><strong>DBMS에 종속적이지 않다.</strong></p>\n</blockquote>\n<ul>\n<li>매핑이 직관적이고, 잘 시켜놓으면 Native Query 없이 객체 메소드를 활용해 CRUD가 가능합니다.</li>\n<li>데이터에 대한 가공 또한 파이썬, 혹은 자바의 기능을 이용함으로써 간결하게 가능합니다.</li>\n</ul>\n<h3 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<hr>\n<blockquote>\n<p><strong>ORM 만으로 서비스를 구축하는 것은 어렵다.</strong></p>\n</blockquote>\n<ul>\n<li>서비스의 복잡성이 커질수록 설계를 매우 신중히 해야하며, 잘못 구현된 경우 SQL문이 비효율적으로 생성되어 성능을 저하시킬 우려가 있습니다.</li>\n<li>복잡한 쿼리를 생성하는 것이 어려울 수 있습니다.</li>\n<li>성능이 최적화된 쿼리 보다는 ORM에 최적화된 쿼리를 생성하기 때문에, 개발 중간에 성능을 저하시킬 수 있는 부분은 <code class=\"language-text\">row query</code>를 꼭 확인해서 어떻게 쿼리가 생성되는지 확인할 필요가 있습니다.</li>\n</ul>\n<br>\n### ORM의 종류\n---\nORM을 제공하는 Framework는 여러가지가 있는데, 대표적으로는 다음과 같습니다.\n<ul>\n<li>Sequelize (Node.js)</li>\n<li>JPA/Hibernate (Java)</li>\n<li>Django ORM (Django 자체 제공)</li>\n</ul>\n<h2 id=\"django의-orm\" style=\"position:relative;\"><a href=\"#django%EC%9D%98-orm\" aria-label=\"django의 orm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django의 ORM</h2>\n<p>저는 이번 포스팅에서는, <code class=\"language-text\">Django</code>에서 자체적으로 제공하는 ORM에 대해서 소개드리려고 합니다.\n먼저 위에서 <code class=\"language-text\">객체</code>와 데이터베이스를 이어주는 역할을 한다고 했었기 때문에, 가장 먼저 필요한건 모델(객체)를 정의하는 것입니다.</p>\n<h3 id=\"모델\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8\" aria-label=\"모델 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델</h3>\n<p>Django의 모델은 데이터베이스에 매핑되는 객체입니다.\n보통 하나의 모델은 하나의 테이블에 Mapping 되고, 클래스내의 Attribute 들은 테이블내의 필드를 나타냅니다.\n가장 기본적인 예를 하나 들어볼게요.</p>\n<p>person app을 하나 추가하고, setting.py에 어플케이션을 등록한 후 model 디렉토리 내에 model을 정의해볼게요.</p>\n<p><code class=\"language-text\">person.py</code></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">People</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>\n        verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'이름'</span><span class=\"token punctuation\">,</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">126</span><span class=\"token punctuation\">,</span> null<span class=\"token operator\">=</span><span class=\"token boolean\">False</span>\n    <span class=\"token punctuation\">)</span>\n    birth_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>\n        verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'생년월일'</span>\n    <span class=\"token punctuation\">)</span>\n    wallet <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>\n        verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'지갑'</span><span class=\"token punctuation\">,</span> related_name<span class=\"token operator\">=</span><span class=\"token string\">'wallet'</span><span class=\"token punctuation\">,</span>\n        to<span class=\"token operator\">=</span><span class=\"token string\">'person.Wallet'</span><span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> db_constraint<span class=\"token operator\">=</span><span class=\"token boolean\">False</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">wallet.py</code></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Wallet</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    amount <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span>\n        verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'잔액'</span><span class=\"token punctuation\">,</span> default<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 코드는 Person(사람)과 Wallet(지갑)이 1대다 관계로 매핑되어 있는 것을 나타냅니다.<br>\n각 필드를 설정할 때마다 필드가 어떤 <code class=\"language-text\">Type</code>인지, 그리고 <code class=\"language-text\">ForeignKey</code>관계를 설정할 시 여러 옵션들을 줄 수도 있습니다.</p>\n<p>먼저 어떤 테이블을 참조할지는 <code class=\"language-text\">to</code>에 지정해주면 되는데 보통 <code class=\"language-text\">app_name.Model_name</code> 으로 설정합니다. 안그러면 Circular import Error가 발생합니다.</p>\n<p>위에서 설정한 <code class=\"language-text\">on_delete=models.CASCADE</code> 옵션은 삭제옵션으로, 해당 모델이 삭제 될 때 참조된 테이블의 열또한 함께 삭제하겠다는 설정이고, 다른설정들도 있습니다. (예를들어 DO_NOTHING으로 설정하면 참조 테이블의 열의 데이터를 삭제하지 않습니다. 무결성이 깨지기 때문에 잘 쓰진 않습니다.)</p>\n<p>db_constraint는 안적으면 기본적으로 <code class=\"language-text\">True</code>가 default 값이고, <code class=\"language-text\">False</code>로 주게되면 데이터베이스 내에서 참조 무결성을 체크하지 않습니다. 이렇게 하면 <code class=\"language-text\">DoesNotExists</code> Exception이 코드내에서 발생할 가능성이 있습니다. (참조 실패)</p>\n<p>위 옵션도 잘 쓰지는 않는데, ForeignKey 사용으로 인한 성능 저하를 막기 위해 무결성을 포기하더라도 Index 작업을 통해 성능을 올리기 위해 사용하는 경우도 있습니다. 다만 참조무결성이 훼손되니 Error Handling을 잘해줘야겠죠.</p>\n<p>어쨌든 Model의 정의에 대한 더 다양한 옵션이나 방법들은 구글링을 통해 알아보시면 될 것 같습니다.</p>\n<p>이렇게 모델을 정의를 했다면, 데이터베이스에 해당 변경사항을 알려주고 반영해야 합니다.\n이 과정을 <code class=\"language-text\">Migration</code> 이라고 합니다.</p>\n<h3 id=\"migration\" style=\"position:relative;\"><a href=\"#migration\" aria-label=\"migration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Migration</h3>\n<p>Migration 이란 모델의 변경, 수정사항을 데이터베이스 스키마에 반영하는 과정이라고 쉽게 이해하시면 됩니다.\n또한 이런 수정내역 또한 migration 폴더 내에 app 마다 존재합니다. <code class=\"language-text\">Git</code>처럼 데이터베이스를 버전별로 관리할 수 있다는 장점도 가지고 있습니다.</p>\n<p>Migration을 하는 방법은 manage.py의 command를 통해서 이뤄집니다.</p>\n<p>제일 먼저 model을 정의했으니, migration 파일을 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">python manage.py makemigrations person<span class=\"token punctuation\">(</span>app_name<span class=\"token punctuation\">)</span></code></pre></div>\n<p>뒤에 app_name을 안넣으면 전체 app에 대하여 migration을 수행합니다.</p>\n<p><img src=\"https://i.imgur.com/BIJtVEY.png\" alt=\"스크린샷 2021-08-10 오전 2.13.12\"></p>\n<p>app 내의 migration 폴더를 확인하면 이런식으로 생성된 걸 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Migration</span><span class=\"token punctuation\">(</span>migrations<span class=\"token punctuation\">.</span>Migration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    initial <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\n    dependencies <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">]</span>\n\n    operations <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        migrations<span class=\"token punctuation\">.</span>CreateModel<span class=\"token punctuation\">(</span>\n            name<span class=\"token operator\">=</span><span class=\"token string\">'Wallet'</span><span class=\"token punctuation\">,</span>\n            fields<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>BigAutoField<span class=\"token punctuation\">(</span>auto_created<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> serialize<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ID'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">(</span><span class=\"token string\">'amount'</span><span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span>default<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'잔액'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        migrations<span class=\"token punctuation\">.</span>CreateModel<span class=\"token punctuation\">(</span>\n            name<span class=\"token operator\">=</span><span class=\"token string\">'People'</span><span class=\"token punctuation\">,</span>\n            fields<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>BigAutoField<span class=\"token punctuation\">(</span>auto_created<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> serialize<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'ID'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">126</span><span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'이름'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">(</span><span class=\"token string\">'birth_date'</span><span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'생년월일'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">(</span><span class=\"token string\">'wallet'</span><span class=\"token punctuation\">,</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>db_constraint<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>deletion<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> related_name<span class=\"token operator\">=</span><span class=\"token string\">'wallet'</span><span class=\"token punctuation\">,</span> to<span class=\"token operator\">=</span><span class=\"token string\">'person.wallet'</span><span class=\"token punctuation\">,</span> verbose_name<span class=\"token operator\">=</span><span class=\"token string\">'지갑'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span></code></pre></div>\n<p>여기서 해당 명령어를 입력하면 DB에 마이그레이션이 어떻게 적용되어 있는지 app_name 별로 현황을 볼 수 있습니다. (안넣으면 다 보여줍니다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">python manage.py showmigrations person<span class=\"token punctuation\">(</span>app_name<span class=\"token punctuation\">)</span></code></pre></div>\n<p><img src=\"https://i.imgur.com/8f31OWs.png\" alt=\"스크린샷 2021-08-10 오전 2.18.05\"></p>\n<p>해당 마이그레이션 파일을 적용시키려면, 밑 명령어를 입력하시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">python manage.py migrate person<span class=\"token punctuation\">(</span>app_name<span class=\"token punctuation\">)</span></code></pre></div>\n<p>연결된 DB를 확인해보시면, 테이블과 필드가 생성되었음을 확인하실 수 있습니다.</p>\n<p>여기서 어떤 SQL이 수행됐는지 확인하려면,</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">python manage.py sqlmigrate <span class=\"token punctuation\">[</span>app_name<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>migration_number<span class=\"token punctuation\">]</span></code></pre></div>\n<p>을 치면 어떤 sql이 수행됐는지 확인할 수 있습니다.</p>\n<p>현업에서는 운영서버에 배포를 할 때 migration이 필요한 경우 sqlmigrate를 통해 적용할 sql을 확인하고 실제로 데이터베이스 내에서 수행하는 경우도 있습니다.</p>\n<p><img src=\"https://i.imgur.com/ulaRk1H.png\" alt=\"스크린샷 2021-08-10 오전 2.20.18\"></p>\n<p>다음편에서는 이렇게 생성한 객체를 통해 데이터베이스에 어떻게 접근하여 데이터를 조작하는지에 대해서 포스팅하겠습니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#ormobject-relational-mapping\">ORM(Object Relational Mapping)</a></p>\n<ul>\n<li><a href=\"#%EC%9E%A5%EC%A0%90\">장점</a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90\">단점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#django%EC%9D%98-orm\">Django의 ORM</a></p>\n<ul>\n<li><a href=\"#%EB%AA%A8%EB%8D%B8\">모델</a></li>\n<li><a href=\"#migration\">Migration</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ORM(Object Relational Mapping) 먼저 이 뭘까요? 이름에서 알 수 있듯 간단히 말하면 와, 를  시켜주는 역할을 하는 녀석입니다.  <- 매핑(ORM) ->  로직을 구성하면서 CRUD를 위해 SQL을 작성할 필요 없이, 객체를 정의하고 ORM이 제공하는 Method를 사용하여 데이터베이스에 적재된 데이터를 쉽게 접근할 수 있도록 하는 것입니다. 이 과정에서 자동으로 SQL을 생성하면서 매핑이 되는 것 입니다! (편하죠?) 텍스트로만 보셨을 땐 이해가 잘 안되실 수도 있는데요, 코드를 보면 쉽게 이해하실 수 있으실 겁니다. 만약 ORM이 없으면 DB에 접근하는 비즈니스 로직마다 SQL을 작성해서 접근해야 하고, 이렇게 되면 비즈니스 로직이 너무 복잡해지고 간결성이 줄어듭니다. 또 팀 내에서 코드를 서로 이해하는데에도 큰 리소스가 듭니다. 저도 회사에서 Django 기반으로 서버가 구성되어 있어 ORM을 사용해 백엔드 로직을 작성하고 있는데, 너무 편합니다. …","frontmatter":{"date":"July 10, 2021","title":"Django(장고) ORM 정리 - Model의 정의","categories":"Framework","author":"CodeSik","emoji":"🧢"},"fields":{"slug":"/Django-ORM-Model/"}},"next":{"id":"c029fc0b-dd51-50fd-86b8-d51522ae6426","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAEwklEQVQ4ywXB6U9TBwAA8LdsiU6zZToFBgWRyhFlgBWBXhw9Xu/7tX30vlt60JPS0rv0pBTsKJajylVU6GSZB85tqBGXuJks2/xkTDa3JSb7YvwT9vsBK1lVZV6znJLsLWnGDAKa1sMXS0EGjysQnOvoqmtqb2y/LNZHA7kNXSDP13nYGjdJ6sdyHaDQCeSDou0rmuqiZvuKXCMerqmpZ3AhMp3D4vG/vIRuaDpHZzHoIjGaKuvBetsuTnSgnLCJovcQQTkdSHkFaR8cdau25lVWDePSxR6uQDBEopKpjJr6psu9fQO4QYoIwxZbKZSbkHhXqd/IlTzpBafOZQPyMdtsSHvjamBvyZAP8s+2tKBxBDpXyBeLzqMGEB09jR1dwzS+yRcQGdUCnYqnVZNFWixLOsyVAnurrus59XIS3i9rdhaUTa1t5y8O4MlMRFsXorVTBrG2oravE16jZVyos2mdPpV9Quv2XsCTkL2DwL1rhkJYFHWwHt20PNiydV9oO326pfFMW0czYmaMd5hz3AtZY+pRiUrDV+rosByEJHiGAInCnW7rATI+KOUX3dl0vPkl92xnehjT39La7ddyn696ni6FilaZChxqQCA/OF575ATiRH3LkZNNx2qRH9cij9Yggd8fJV8dxF5/l3mxla5E7BhUJ58y+KQ8veZVxVQcVPs54MPjR499hr/UmbeIDmZ9MJX+0ae1J+rOflLTDPx9kD4seatxd9GuFxKxnR2ti2HXenaq6DNkQ3arXhEYG90IKl+vh9+sRZ+mXMVJNwvW8ORGvtoKPLsWW/GZPXyiV0iVMUmd7Ug2nZbyjT/cKf3xoPTX3cw/d7I/Fyfu+LVFI5yw6qfjqWShnFzYyKzsArfnw3MerR0CF/02BonIpoMKqwuCR6szjp9KvvvTurtxfd4mUXJpOAzuMo7QP0jCEqg4kDPEgoH1iDljlm/OBMuhcQq2H4VCDYF0Fr63ZObeCpviWoGCSyWSKUQyRQfzKglHyGYiMCA8yAEhOfB9Kf5DeaYyE0yPwX4x2NvdJaSRZs1Sh4DgVPED4+pizLKWMD8pON/eir6rZl5em1eqDSSehCpUAdX5SDU3tZmcjJvgaQVDzQIDGul2zJOySO/OuV/thN89TL+9Hf1z2fvbvOdBwLjuNjM4EGNUA/JlwM252ErEWY640jbFwqRp1m+9OmmuRGw3/OrDr3zPi64XReftiHbOJHILGQoWjcXkkHkSpljFlo8B1UJiIxcshR1zTsOvPy4c7ic2o877s76onOMVkk084ih9mAWO0KhU3AiJyBYSmHyWWDVAYjJlRuDGXHQ17lqetGwnp8pJU8LNqqR9+4VEyaXaS6irGcNqSL0/a3+5HntciktGJXgqb4QugLR2rnIM2Mr6F4Ou69nptXyymIpOBwKLsalKNviw4H+9m3x/UHh/P/eumv63kvpvdyHpnSBDymG6gC0zYWgQsDJlNkIMAolIHBkZ6Osf6EP3ovoIIwSJGC5EvI+Xpr5Nj98KWq56TE6Y348Z6kYTMGQOCClAkRr4Jjtl5FHqEQ0tZ840NjQ1fNFQV1N38vNTzc1Ig16vU8AWvcJk0NjtNiZXgCZQetDDPVgiapDSS2T8D1Rm4WcvAcvOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"썸네일\"\n        title=\"썸네일\"\n        src=\"/static/71ab55bf653879bc67f779bbebff3b88/37523/IMG_1564.png\"\n        srcset=\"/static/71ab55bf653879bc67f779bbebff3b88/e9ff0/IMG_1564.png 180w,\n/static/71ab55bf653879bc67f779bbebff3b88/f21e7/IMG_1564.png 360w,\n/static/71ab55bf653879bc67f779bbebff3b88/37523/IMG_1564.png 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"callout\"> 💡피플펀드 인턴 1개월 차\b</p>\n<h2 id=\"오랜만의-포스트\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%9E%9C%EB%A7%8C%EC%9D%98-%ED%8F%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"오랜만의 포스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오랜만의 포스트</h2>\n<p>인턴 생활을 하게 되면 한달에 2번은 올리겠다고 다짐했지만.. 회사에 적응하느라 한달반동안 이제 처음으로 포스트를 쓰게됩니다..ㅎ</p>\n<p>짧은 기간임에도 처음으로 현업을 접한 것이다 보니 배운게 정말 많고 쓰고싶은 포스트도 많지만, 일단 출근 4시간전에 빨래방에서 글을 쓰고 있어서 간단히 배운것들과 후기만 남기려고 합니다.</p>\n<hr>\n<h2 id=\"맡은-역할\" style=\"position:relative;\"><a href=\"#%EB%A7%A1%EC%9D%80-%EC%97%AD%ED%95%A0\" aria-label=\"맡은 역할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>맡은 역할</h2>\n<p>자세한건 말씀드릴 순 없지만, 제가 다니는 회사는 P2P 대출을 주력 상품으로 내세우는 회사이기 때문에 돈의 흐름이 매우 중요합니다.</p>\n<p>사실 어떤 서비스를 운영하는 회사던 간에 결제 시스템이 있다면 돈의 흐름을 관리하는 (정산, 이체 등) 로직은 어디에나 존재합니다.</p>\n<p>그 중에서도 투자와 대출에 관련되어 있는 회사에 다니다 보니 그 로직을 관리하는 일은 매우 중요하다고 할 수 있습니다.</p>\n<p>저는 핀테크 엔지니어링 그룹에서 정산, 상환 등의 돈의 흐름을 관리하는 백엔드 로직을 개발하는 역할을 담당하고 있습니다 :)</p>\n<hr>\n<h2 id=\"한달동안-해왔던-일\" style=\"position:relative;\"><a href=\"#%ED%95%9C%EB%8B%AC%EB%8F%99%EC%95%88-%ED%95%B4%EC%99%94%EB%8D%98-%EC%9D%BC\" aria-label=\"한달동안 해왔던 일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>한달동안 해왔던 일</h2>\n<p><img src=\"https://i.imgur.com/Jo7tZl1.jpg\" alt=\"201712315a488ac3ec81c\"></p>\n<p>처음에는 너무 막막함 그 자체였습니다..</p>\n<p>학교에서 과제를 하거나 개인적으로 친구들과, 혹은 혼자 프로젝트를 진행해봤던 경험과는 너무나도 간극이 컸습니다.</p>\n<p>일단 규모가 너무 크고, 모듈도 많아 코드를 파악하는데 2주정도는 쓴 것 같습니다.</p>\n<p>그리고 제가 개인적으로 작업했던 프로젝트를 AWS에 올려서 서비스를 하고있는데, 굉장히 보안에 취약하다는 생각을 많이 했습니다.</p>\n<p>핀테크 스타트업이라서 보안이 정말 중요하기 때문에 AWS에 인스턴스를 올릴 때 고려해야할 상황이 정말 많았습니다. 그냥 넘어갔던 보안 그룹(제 프로젝트는 다 열어놨었습니다..), 로드밸런서, CI 시스템, Git otp 접근 등..</p>\n<p>현업에서 코드를 어떻게 관리하고 네트워크 구축은 어떻게 되어있는지 파악하고 나니 그동안 제가 작업했던 결과물들이 초라해지더군요..ㅎ 아직 배울게 정말 많다는 생각이 들었습니다.</p>\n<p>그렇게 한달동안 아키텍처의 구조도 파악하고, 코드도 파악하고, 회사 직원분들이랑 친해지는 시간도 가지고, 개인적으로 Django를 회사에 와서 처음써봐서 주말에는 공부하는 시간을 좀 가졌습니다.</p>\n<h3 id=\"첫-기능-개발\" style=\"position:relative;\"><a href=\"#%EC%B2%AB-%EA%B8%B0%EB%8A%A5-%EA%B0%9C%EB%B0%9C\" aria-label=\"첫 기능 개발 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫 기능 개발</h3>\n<p>코드의 구조를 파악하기 좋은 사내 메신저(슬랙) 알림을 만드는 기능을 개발했습니다.</p>\n<p>자세히는 말씀을 못드리지만, 대충 사내 정산시스템에서 문제가 생긴 경우나 정산 현황에 대해서 알림을 줄 수 있는 기능을 맡게 되었습니다.</p>\n<p>저는 Git을 쓸 때 곧이 곧대로 그냥 master 브랜치에 다 때려박는 아주 안좋은 습관이 있었는데.. 이번 기능을 개발하면서 <code class=\"language-text\">Git Flow</code>에 대해서 알게 되었고 그 중요성을 깨달았습니다. 이 부분은 따로 자세히 더 공부해서 포스팅을 해볼 예정입니다.</p>\n<p>현업에서 Git을 사용하는 방법을 글로만 봤을 땐 전혀 이해를 못했는데, 실제로 해보니까 이해가 너무 잘됐었습니다. 그렇게 첫 PR을 날리고 develop에 merge 됐을 때 쾌감이 너무 좋았습니다..ㅎ</p>\n<p>그 이후로는 <code class=\"language-text\">Quick Fix Issue</code> 들이 나오면 배정받아서 계속 PR을 날렸고, 지금도 계속 처리를 하면서 코드의 구조에도 익숙해지고 대충 어떻게 돌아가는지는 파악이 된 것 같습니다. 아직 많이 부족하지만요..</p>\n<hr>\n<h2 id=\"다짐\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A7%90\" aria-label=\"다짐 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다짐</h2>\n<p>곧 출근이라.. 얼른 쓰고 마쳐야겠습니다.</p>\n<p>회사 생활을 하면서 느끼고 깨달은게 정말 많은데, 잊어버리기 전에 빨리 글로 남기지 않으면 날려 버릴 것 같아 좀 초조한 느낌입니다. 이번 주말에는 피곤하다고 디비 자지 않고 그동안 배운 것들, 그리고 지금 개발을 할 때 필요한 스킬들에 대해서 좀 포스팅을 해볼까 합니다.</p>\n<p>인턴이 끝나는 시기에는, <code class=\"language-text\">백엔드 개발자</code>라고 불릴 수 있을 만큼 성장해 있었으면 좋겠네요 ㅎ</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%98%A4%EB%9E%9C%EB%A7%8C%EC%9D%98-%ED%8F%AC%EC%8A%A4%ED%8A%B8\">오랜만의 포스트</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%A1%EC%9D%80-%EC%97%AD%ED%95%A0\">맡은 역할</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%95%9C%EB%8B%AC%EB%8F%99%EC%95%88-%ED%95%B4%EC%99%94%EB%8D%98-%EC%9D%BC\">한달동안 해왔던 일</a></p>\n<ul>\n<li><a href=\"#%EC%B2%AB-%EA%B8%B0%EB%8A%A5-%EA%B0%9C%EB%B0%9C\">첫 기능 개발</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%A7%90\">다짐</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 26, 2021","title":"피플펀드 1개월간의 인턴 생활 회고","categories":"Life","author":"CodeSik","emoji":"🧢"},"fields":{"slug":"/Intern1/"}},"prev":{"id":"12761824-c9f5-54c3-8757-07eebc3a96c3","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABBElEQVQoz2P4jwT+/fsHp//+/YvCh7EJAQZchsHAnz9//v/5+xcsBsJ//iL42CxjwOZCEHj++tX/T18+43UNNlejuBCmYM/JI/8zW2v+bz287/+1e7f/n7566f+561f+33n88P/h86f/n7x84f/9p4/xuxDmhbuPH/73L0j9n9hQ+j+9ueq/S3r0f9+ClP/RVQX/Y2uKwHIBhWn/yyd2wvVhNRAm+OPnz/97Th793zx78v+uBTP/bzuy///BMyfALizpa/uf19UIlj915SLEQGLD8N3HD/9//vqFEj4nLp2De5WoMITRoJhFjuW/SLEKAr+hYkTFMkwS2SswcXzJBauB1AAASn341nwsOmUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"썸네일\"\n        title=\"썸네일\"\n        src=\"/static/5f3366eed67a305e1a7a81e79a1f7483/8c557/django.png\"\n        srcset=\"/static/5f3366eed67a305e1a7a81e79a1f7483/e9ff0/django.png 180w,\n/static/5f3366eed67a305e1a7a81e79a1f7483/f21e7/django.png 360w,\n/static/5f3366eed67a305e1a7a81e79a1f7483/8c557/django.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"callout\"> 💡[Django] Django의 ORM</p>\n<hr>\n<h3 id=\"operation\" style=\"position:relative;\"><a href=\"#operation\" aria-label=\"operation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Operation</h3>\n<p>처음 언급한 것 처럼 ORM의 함수를 통해서 어떻게 데이터들을 조작할 수 있는지 살펴보겠습니다.</p>\n<p><a href=\"https://django-orm-cookbook-ko.readthedocs.io/en/latest/index.html\">Django CookBook</a>\n여기서 기본적인 CRUD 문법을 확인하실 수 있습니다.</p>\n<blockquote>\n<p><strong>Select</strong></p>\n</blockquote>\n<p>특별한 설명없이 자주 쓰이는 함수들을 소개드리고, 주의할 점 몇가지를 말씀드리겠습니다.</p>\n<p>먼저 객체를 통해 데이터를 가져오는 연산들 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Select * from person</span>\npersons <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Select * from person where id = 1</span>\nperson <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>여기서 기본적으로 전체를 가져오거나, filter 함수를 통해 Where Caluse를 사용해 조건을 걸어줄 수 있습니다.\n중요한 점은 위 두 연산 모두 실제 객체를 가져오는 것이 아닌, <code class=\"language-text\">Query Set</code>만을 반환하기 때문에 위 변수로는 접근이 바로 안됩니다.</p>\n<p>따라서 실제 객체에 접근하기 위해서는</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">person <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"Codesik\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nperson <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이런식으로 하게 되면 실제 객체에 접근할 수 있게 됩니다. first는 쿼리셋 내에서 가장 첫번째의 값을 참조하는 함수입니다.</p>\n<p>제가 이렇게 쿼리셋 / 실제 객체 접근을 구분한 이유는, DB 접근 횟수를 줄임으로써 성능에 이점을 줄 수 있기 때문입니다.</p>\n<p>예를 들어 Codesik 이라는 이름을 가진 사람의 <code class=\"language-text\">숫자</code>만을 세고싶은데, get()이나 first()로 접근하는 것 보다는</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">person_number <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"Codesik\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>로 숫자만 반환하는 것이 성능상의 이점이 더 있습니다.</p>\n<p>또 팁하나를 드리자면</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">person_list <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"Codesik\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> person <span class=\"token keyword\">in</span> person_list<span class=\"token punctuation\">:</span>\n  <span class=\"token keyword\">pass</span>\n</code></pre></div>\n<p>이런식으로 반복문을 돌게되면 person은 쿼리셋이 아닌 객체로 참조되게 됩니다.</p>\n<p><img src=\"https://i.imgur.com/7WZI4mr.png\" alt=\"1_hgO-53N6ReTT99l4IygmiA\"></p>\n<p>(작성중)</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#operation\">Operation</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 10, 2021","title":"Django(장고) ORM 정리 - 데이터를 조작하는 방법","categories":"Framework","author":"CodeSik","emoji":"🧢"},"fields":{"slug":"/Django-ORM-Operation/"}},"site":{"siteMetadata":{"siteUrl":"https://codesik.github.io","comments":{"utterances":{"repo":"CodeSik/CodeSik.github.io"}}}}},"pageContext":{"slug":"/Django-ORM-Model/","nextSlug":"/Intern1/","prevSlug":"/Django-ORM-Operation/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}